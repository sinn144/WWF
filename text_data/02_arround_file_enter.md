# 6/15の真夜中日記

## 作っていたコードについて

### CSVファイルの問題

今まであまりやってこなかったCSVのファイルを読み込むコードを書く練習をしていた。file_enterというファイルの中にその悪戦苦闘の様子を残している…(´・ω・`)

問題点とか、参考にしたリンクを残しておきたい。

ただ、まだ使いにくい気がするので、分割したいとも思ったり思わなかったり。

#### CSVのカンマ区切り

カンマ区切りをそのまま

    sscanf(line,"%lf,%lf,%[^,]",&data[0],&data[1],str);

と書く方法はメジャーである。日本語情報をあたっても「*CSV C言語 読み込み*」と調べて出てくるのはsscanfの情報ばかり…(そもそも論として、Google先生に頼り過ぎなのかもしれないけど(;^_^A))

使える資料もたくさん。上の文字列のことについては、

[C言語 CSVファイルの読み込み - stdio.h - [ fscanf ] - 勇躍のゴミ箱](http://simd.jugem.jp/?eid=49)

が詳しかった。(てかC言語についてすごい情報量のあるサイトだぁ…)

ただしデメリットとして、

「もしカンマ区切りが**10000**個以上だったら？」

と問われるとゾッとしますよ… どれだけ`%lf`と書かないといけないのか…

そこで、コードのサイズを可変にすればいいじゃないか、ということで

    strtok(line <or NULL>,"<operater>");

    line       : 文字列
    <operater> : 区切り文字 like "," , "\n" , etc ...

をいう便利な関数を使うことにした。これで、カンマ前の文字を区切って使うことが出来る。

使い方についてはリンクで逃げる…

[strtok - 初心者のためのポイント学習Ｃ言語](http://www9.plala.or.jp/sgwr-t/lib/strtok.html)

これによって、一回目できちんと値を与えれば、あとの代入式はfor文で回せるから楽。

※ちなみに、例え値が数字列でも、strtok関数は文字列として返してくるので、

    #include <stdlib.h>
    num = atof(<string>);

    string : 文字列

という関数で強制的に数値に置き換えている。

参照 : [C言語 atof - ムーミン氏](http://hitorilife.com/atof.php)

#### 自作関数の引数に二次元配列の利用

ここがデバッグの山場だった…( ﾉД`)ｼｸｼｸ…

配列への挿入の時に変な動きをしていたことを感知。

自作関数内では文字列の受け渡しやデータの受け渡しは成功していたのだが、main関数に戻ると状況は一変し、文字列がうまく受け渡されていないしゴミは入ってるしと思って燻っていたのだが、今日(というか昨日)ようやく解決。

簡単に言うと、二次元配列の引数はかなり癖が強いということである。

一次元では考えられる方法で、

    int N,double array[N];
    function1(N,array);
    function2(N,&array[0]);
    function3(N,array[]);

などの、ポインターの考え方の応用でこのような関数への導入が可能。嘘ついてるかもしれないので、詳しくは

[関数_プログラミングＢ - 山田 修司 氏](http://www.cc.kyoto-su.ac.jp/~yamada/programming/function.html)

を見たほうが絶対ええ🐕

しかし、これは一次元配列が根底ではメモリーの隣接した領域に存在することからこの書き方が出来るだけで、二次元配列はそうやすやすとは行ってくれない。

色々な文献を探し回っていると、次のような記事を発見。

[C言語の引数に多次元配列を渡す - Hiraku Nakano @Qiita](https://qiita.com/Hiraku/items/babed27bc1d750c2e12d)

これに従って、関数の引数を一新。そうして理解できた。

(力尽きてしまった … また今度、続きかきます…(=_=))

### Gnuplot

#### ラベルのギリシャ文字の使い方

1. terminal 指定のところの最後に *"enhanced"* を記載。例えば、
    
    `set terminal pngcairo monochrome enhanced`

    のように用いる。

1. ラベル指定で、使いたいギリシャ文字に対応するアルファベットを用いて次のように記載:

    `set ylabel "{/Symbol a}"`

    こう書くと、ギリシャ文字のαがy軸に出てきてくれる。

参照 : [ラベルあれこれ(その1) - GNUPLOT](http://folk.uio.no/inf3330/scripting/doc/gnuplot/Kawano/label.html)

👆ここのサイトにギリシャ文字：アルファベットの対応表が記されている。

***

## 編集後記

いや、一応完成してよかった😊

デバッグが通って何か完成するのやっぱ楽しいんですよ…

もっといろいろ作ってみたいとおもったり。まだまだ技能も足りませぬ…